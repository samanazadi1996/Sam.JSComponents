var photoViewerbody=null,photoViewerimg=null,photoViewerFilter=null;function CreatePhotoViewer(){(photoViewerbody=document.createElement("div")).style.display="none",photoViewerbody.style.left="0px",photoViewerbody.style.top="0px",photoViewerbody.style.right="0px",photoViewerbody.style.bottom="0px",photoViewerbody.style.position="absolute",photoViewerbody.style.padding="10px",photoViewerbody.style.backgroundColor="rgb(0 4 45)",photoViewerbody.style.direction="rtl",photoViewerbody.style.overflow="hidden",document.body.appendChild(photoViewerbody);var a=document.createElement("div");a.style.left="0px",a.style.top="0px",a.style.right="0px",a.style.height="45px",a.style.position="absolute",a.style.padding="10px",a.style.direction="rtl",a.style.zIndex="10",a.onmouseover=function(){for(let a=1;a<this.childElementCount;a++)this.children[a].style.removeProperty("display")},a.onmouseout=function(){for(let a=1;a<this.childElementCount;a++)this.children[a].style.display="none"},photoViewerbody.appendChild(a);let b=(a,b,c)=>{a.innerText=b,a.style.backgroundColor=c,a.style.borderRadius="10px",a.style.marginRight="5px",a.style.marginLeft="5px",a.style.cursor="pointer",a.style.color="white",a.style.padding="4px"};var e=document.createElement("button");b(e,"Close","red"),e.onclick=function(){photoViewerbody.style.display="none"},a.appendChild(e);var c=document.createElement("button");c.style.display="none",b(c,"Download","blue"),c.onclick=function(){var b=photoViewerimg.attributes.src.value,c=b.split("/").pop(),a=document.createElement("a");a.setAttribute("href",b),a.setAttribute("download",c),a.setAttribute("target","_blank"),document.body.appendChild(a),a.click(),a.remove()},a.appendChild(c);var d=document.createElement("button");b(d,"Rotate","green"),d.setAttribute("onclick","RotateImage()"),d.onclick=function(){var a=Number(photoViewerimg.attributes.rotete?.value??0);(a+=90)%180!=0?photoViewerimg.offsetWidth>photoViewerbody.offsetHeight?(photoViewerimg.style.maxWidth=photoViewerbody.offsetHeight,photoViewerimg.style.maxHeight=photoViewerbody.offsetWidth):(photoViewerimg.style.maxHeight=photoViewerbody.offsetWidth,photoViewerimg.style.maxWidth=photoViewerbody.offsetHeight):(photoViewerimg.style.maxWidth="100%",photoViewerimg.style.maxHeight="100%"),photoViewerimg.style.transform=`translate(-50%, -50%) rotate(${a}deg)`,photoViewerimg.setAttribute("rotete",a),photoViewerimg.removeAttribute("zoomed")},a.appendChild(d),b(photoViewerFilter=document.createElement("select"),null,"magenta"),["none","blur(1px)","brightness(0.5)","contrast(0.5)","drop-shadow(2px 4px 6px black)","grayscale(1)","hue-rotate(45deg)","inherit","invert(1)","opacity(0.5)","revert","saturate(0.5)","sepia(1)"].forEach(a=>{var b=document.createElement("option");b.innerText=-1==a.indexOf("(")?a:a.substring(0,a.indexOf("(")),b.setAttribute("value",a),photoViewerFilter.appendChild(b)}),photoViewerFilter.onchange=function(){photoViewerimg.style.filter=this.value},a.appendChild(photoViewerFilter),(photoViewerimg=document.createElement("img")).style.maxHeight="100%",photoViewerimg.style.maxWidth="100%",photoViewerimg.style.position="absolute",photoViewerimg.style.transform="translate(-50%, -50%)",photoViewerimg.style.top="50%",photoViewerimg.style.left="50%",photoViewerimg.style.transition="500ms",photoViewerimg.ondblclick=function(a){var b=this.attributes.rotete?.value??0;this.attributes.zoomed?.value?(this.style.transform=`translate(-50%,-50%) rotate(${b}deg)`,this.removeAttribute("zoomed")):(this.style.transform=`translate(-${a.offsetX}px,-${a.offsetY}px) rotate(${b}deg) scale(2)`,this.setAttribute("zoomed",!0))},photoViewerbody.appendChild(photoViewerimg)}HTMLElement.prototype.InitVewer=function(){photoViewerFilter.value="none",photoViewerimg.setAttribute("src",this.attributes.src.value),photoViewerimg.style.transform="translate(-50%, -50%)",photoViewerimg.style.maxWidth="100%",photoViewerimg.style.maxHeight="100%",photoViewerimg.style.removeProperty("filter"),photoViewerimg.removeAttribute("rotete"),photoViewerimg.removeAttribute("zoomed"),photoViewerbody.style.removeProperty("display")},CreatePhotoViewer()